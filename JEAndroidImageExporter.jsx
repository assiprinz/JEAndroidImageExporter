// ++++++++++++++++++++++// Android Image Exporter// By Jan Eberl// ++++++++++++++++++++++#target Photoshopvar bProgress;var count = 5;var cancel = false;main();function main() {        var window = new Window("palette", "Export");    window.frameLocation = [$.screens[0].right/2, $.screens[0].top+300];    window.preferredSize = [300, 130];     var comment = window.add ("statictext",undefined, "Exporting Drawables ...");     comment.size = [270,20];    bProgress = window.add ("progressbar",undefined, 0);      bProgress.size = [270,20];    window.cancel = window.add ("button",undefined, "Cancel");      window.cancel.onClick = function (){          cancel=true;          window.close();    }        // Ask user for input file	var inputFile = File.openDialog("Select a PSD file representing your Drawable in xxxhdpi","PSD File:*.psd");	if (inputFile == null) {        window.close();        return;    }        window.show();        // open    open(inputFile);    var docRef = app.activeDocument;        // generate output folders    // xxxhdpi	var dirxxxhdpi = Folder(app.activeDocument.path+"/drawable-xxxhdpi");	if(!dirxxxhdpi.exists) dirxxxhdpi.create();    // xxhdpi	var dirxxhdpi = Folder(app.activeDocument.path+"/drawable-xxhdpi");	if(!dirxxhdpi.exists) dirxxhdpi.create();    // xhdpi	var dirxhdpi = Folder(app.activeDocument.path+"/drawable-xhdpi");	if(!dirxhdpi.exists) dirxhdpi.create();    // hdpi	var dirhdpi = Folder(app.activeDocument.path+"/drawable-hdpi");	if(!dirhdpi.exists) dirhdpi.create();    // mdpi	var dirmdpi = Folder(app.activeDocument.path+"/drawable-mdpi");	if(!dirmdpi.exists) dirmdpi.create();        //resizing    resize(dirxxxhdpi,100);    setProgress (20);    resize(dirxxhdpi,75);    setProgress (40);    resize(dirxhdpi,50);    setProgress (60);    resize(dirhdpi,37.5);    setProgress (80);    resize(dirmdpi,25);    setProgress (100);        // close    app.activeDocument.close(SaveOptions.DONOTSAVECHANGES);}function resize(dir,size) {    if (cancel) {        return;    }    // Setup file name    var fname = app.activeDocument.name.replace(/[\s-]+/g, '_').replace(/([a-z\d])([A-Z])/g, '$1_$2').replace(/(.*)\.(.*?)$/, "$1").toLowerCase() + ".png";     // Set export options    var opts, file;    opts = new ExportOptionsSaveForWeb();    opts.format = SaveDocumentType.PNG;    opts.PNG8 = false;     opts.transparency = true;    opts.interlaced = 0;    opts.includeProfile = false;    opts.optimized = true;     // Duplicate, resize and export    var tempfile = app.activeDocument.duplicate();    tempfile.resizeImage(size+"%",size+"%");    file = new File(dir+"/"+fname);    tempfile.exportDocument(file, ExportType.SAVEFORWEB, opts);    tempfile.close(SaveOptions.DONOTSAVECHANGES);}function setProgress(prog) {    // set value of progressbar    bProgress.value = prog;}